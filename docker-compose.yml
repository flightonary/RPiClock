web:
  build: web
  container_name: rpiclock_web
  command: bundle exec rails s -p 3000 -b '0.0.0.0'
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ./web:/app
  ports:
    - "3000:3000"

alarm:
  build: alarm
  container_name: rpiclock_alarm
  command: /usr/bin/supervisord -c supervisord.conf
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - /var/run/dbus:/var/run/dbus
    - ./alarm:/app
    - ./alarm/etc/mplayer/mplayer.conf:/etc/mplayer/mplayer.conf
  links:
    - web:localhost
